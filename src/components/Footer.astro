---
// Footer component for NBS Supplements
// Professional footer with company info, links, newsletter signup, and trust signals
// Includes social media links and certification badges
---

<footer class="bg-background border-t border-border/50">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Main Footer Content -->
    <div class="py-12 lg:py-16">
      <!-- Company Branding Section -->
      <div class="text-center mb-12">
        <div class="flex items-center justify-center space-x-3 mb-4">
          <!-- Logo -->
          <div
            class="w-10 h-10 bg-gradient-to-br from-nbs-primary to-nbs-secondary rounded-xl flex items-center justify-center shadow-lg"
          >
            <span class="text-white font-bold text-lg">NBS</span>
          </div>
          <div>
            <span class="text-2xl font-bold text-nbs-trust">NBS</span>
            <span class="text-lg text-muted-foreground ml-1">Supplements</span>
          </div>
        </div>

        <p class="text-base text-muted-foreground max-w-2xl mx-auto leading-relaxed">
          Clean, natural supplements formulated by pharmacists. Clinically
          dosed ingredients, third-party tested, and completely transparent.
        </p>
      </div>

      <!-- Navigation Links -->
      <div class="mb-12">
        <nav aria-label="Footer navigation" class="flex justify-center">
          <ul class="flex flex-wrap items-center justify-center gap-6 lg:gap-8">
            <li>
              <a
                href="/about"
                class="text-sm font-medium text-muted-foreground hover:text-nbs-primary transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded-md px-2 py-1 hover:bg-nbs-primary/5"
              >
                About Us
              </a>
            </li>
            <li class="text-border/60">•</li>
            <li>
              <a
                href="/blog"
                class="text-sm font-medium text-muted-foreground hover:text-nbs-primary transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded-md px-2 py-1 hover:bg-nbs-primary/5"
              >
                Blog
              </a>
            </li>
            <li class="text-border/60">•</li>
            <li>
              <a
                href="/contact"
                class="text-sm font-medium text-muted-foreground hover:text-nbs-primary transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded-md px-2 py-1 hover:bg-nbs-primary/5"
              >
                Contact
              </a>
            </li>
            <li class="text-border/60">•</li>
            <li>
              <a
                href="/reviews"
                class="text-sm font-medium text-muted-foreground hover:text-nbs-primary transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded-md px-2 py-1 hover:bg-nbs-primary/5"
              >
                Reviews
              </a>
            </li>
            <li class="text-border/60">•</li>
            <li>
              <a
                href="/faq"
                class="text-sm font-medium text-muted-foreground hover:text-nbs-primary transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded-md px-2 py-1 hover:bg-nbs-primary/5"
              >
                FAQ
              </a>
            </li>
          </ul>
        </nav>
      </div>

      <!-- Trust Badges / Certifications -->
      <div class="mb-12">
        <div class="bg-gradient-to-r from-nbs-primary/5 via-nbs-secondary/5 to-nbs-primary/5 rounded-2xl p-6">
          <h3 class="text-center text-sm font-semibold text-nbs-trust mb-6 uppercase tracking-wider">
            Quality & Safety Certifications
          </h3>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div class="certification-badge-enhanced">
              <div class="certification-icon">
                <svg
                  class="w-5 h-5"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  aria-hidden="true"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                    clip-rule="evenodd"></path>
                </svg>
              </div>
              <span class="certification-text">GMP Certified</span>
            </div>

            <div class="certification-badge-enhanced">
              <div class="certification-icon">
                <svg
                  class="w-5 h-5"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  aria-hidden="true"
                >
                  <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
              </div>
              <span class="certification-text">FDA Registered</span>
            </div>

            <div class="certification-badge-enhanced">
              <div class="certification-icon">
                <svg
                  class="w-5 h-5"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  aria-hidden="true"
                >
                  <path
                    fill-rule="evenodd"
                    d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"
                    clip-rule="evenodd"></path>
                </svg>
              </div>
              <span class="certification-text">Made in USA</span>
            </div>

            <div class="certification-badge-enhanced">
              <div class="certification-icon">
                <svg
                  class="w-5 h-5"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  aria-hidden="true"
                >
                  <path
                    fill-rule="evenodd"
                    d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                    clip-rule="evenodd"></path>
                </svg>
              </div>
              <span class="certification-text">Third-Party Tested</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Bottom Footer -->
      <div class="pt-8 border-t border-border/50">
        <div class="text-center space-y-4">
          <!-- Legal Links -->
          <nav aria-label="Footer legal navigation">
            <div class="flex flex-wrap items-center justify-center gap-4 text-sm">
              <a
                href="/privacy"
                class="text-muted-foreground hover:text-nbs-primary transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded-md px-2 py-1 hover:bg-nbs-primary/5"
              >
                Privacy Policy
              </a>
              <span class="text-border/60">•</span>
              <a
                href="/terms"
                class="text-muted-foreground hover:text-nbs-primary transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded-md px-2 py-1 hover:bg-nbs-primary/5"
              >
                Terms of Service
              </a>
              <span class="text-border/60">•</span>
              <a
                href="/refund-policy"
                class="text-muted-foreground hover:text-nbs-primary transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded-md px-2 py-1 hover:bg-nbs-primary/5"
              >
                Refund Policy
              </a>
            </div>
          </nav>

          <!-- Copyright -->
          <div class="text-sm text-muted-foreground">
            © {new Date().getFullYear()} NBS Supplements. All rights reserved.
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Load Newsletter component dynamically
    async function loadNewsletterComponent() {
      try {
        const container = document.getElementById("newsletter-container");
        if (!container) return;

        // This would typically load the Newsletter component
        // For now, we'll add a placeholder that matches the Newsletter.astro design
        container.innerHTML = `
        <form 
          name="newsletter" 
          method="POST" 
          data-netlify="true" 
          class="space-y-3"
          action="/thank-you"
          id="footer-newsletter-form"
        >
          <input type="hidden" name="form-name" value="newsletter" />
          
          <div>
            <label for="footer-email" class="sr-only">Email address</label>
            <input
              type="email"
              id="footer-email"
              name="email"
              required
              placeholder="Enter your email"
              class="w-full px-3 py-2 text-sm bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-nbs-primary focus:border-transparent transition-all duration-200"
              aria-describedby="footer-email-description"
            />
            <p id="footer-email-description" class="text-xs text-muted-foreground mt-1">
              We respect your privacy. Unsubscribe at any time.
            </p>
          </div>
          
          <div class="flex items-start space-x-2">
            <input
              type="checkbox"
              id="footer-consent"
              name="consent"
              required
              class="mt-1 h-4 w-4 text-nbs-primary border-border rounded focus:ring-nbs-primary focus:ring-2"
            />
            <label for="footer-consent" class="text-xs text-muted-foreground leading-relaxed">
              I agree to receive marketing emails and acknowledge the 
              <a href="/privacy" class="text-nbs-primary hover:underline">Privacy Policy</a>.
            </label>
          </div>
          
          <button
            type="submit"
            class="w-full px-4 py-2 text-sm font-medium text-white bg-nbs-primary hover:bg-nbs-primary/90 rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-nbs-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            Subscribe
          </button>
          
          <div id="footer-recaptcha-container" class="flex justify-center hidden"></div>
        </form>
      `;
      } catch (error) {
        console.error("Failed to load newsletter component:", error);
      }
    }

    // Initialize newsletter component
    document.addEventListener("DOMContentLoaded", () => {
      loadNewsletterComponent();
      setupFooterRecaptcha();
    });
    document.addEventListener("astro:page-load", () => {
      loadNewsletterComponent();
      setupFooterRecaptcha();
    });

    // Setup conditional reCAPTCHA for footer newsletter
    function setupFooterRecaptcha() {
      const form = document.getElementById("footer-newsletter-form");
      const emailInput = document.getElementById("footer-email");
      const recaptchaContainer = document.getElementById(
        "footer-recaptcha-container"
      );

      if (!form || !emailInput || !recaptchaContainer) return;

      let recaptchaLoaded = false;

      const loadRecaptcha = () => {
        if (recaptchaLoaded) return;
        recaptchaLoaded = true;

        // Add the data-netlify-recaptcha attribute
        form.setAttribute("data-netlify-recaptcha", "true");

        // Create reCAPTCHA div
        recaptchaContainer.innerHTML =
          '<div data-netlify-recaptcha="true"></div>';
        recaptchaContainer.classList.remove("hidden");
      };

      // Trigger reCAPTCHA load on first form interaction
      const interactionEvents = ["focus", "click", "input"];
      const onFirstInteraction = () => {
        loadRecaptcha();
        interactionEvents.forEach((event) => {
          emailInput.removeEventListener(event, onFirstInteraction);
        });
      };

      interactionEvents.forEach((event) => {
        emailInput.addEventListener(event, onFirstInteraction, {
          once: true,
          passive: true,
        });
      });
    }
  </script>

  <style>
    /* Enhanced certification badges */
    .certification-badge-enhanced {
      @apply flex flex-col items-center text-center p-4 bg-white/50 dark:bg-gray-800/50 rounded-xl border border-border/30 hover:border-nbs-primary/40 transition-all duration-300 hover:shadow-sm hover:-translate-y-1;
    }

    .certification-icon {
      @apply w-8 h-8 bg-gradient-to-br from-nbs-primary/20 to-nbs-secondary/20 rounded-lg flex items-center justify-center mb-3 text-nbs-primary;
    }

    .certification-text {
      @apply text-xs font-medium text-foreground;
    }

    /* Legacy certification badge for existing styles */
    .certification-badge {
      @apply flex items-center space-x-2 text-xs font-medium text-muted-foreground;
    }

    .certification-badge svg {
      @apply flex-shrink-0 text-nbs-primary;
    }

    /* Trust signal styling */
    .trust-signal svg {
      flex-shrink: 0;
    }

    /* Enhanced navigation link hover effects */
    nav a {
      position: relative;
    }

    nav a::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 50%;
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, hsl(var(--nbs-primary)), hsl(var(--nbs-secondary)));
      transition: all 0.3s ease;
      transform: translateX(-50%);
    }

    nav a:hover::after {
      width: 100%;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .certification-badge-enhanced {
        @apply p-3;
      }
      
      .certification-icon {
        @apply w-6 h-6 mb-2;
      }
      
      .certification-text {
        @apply text-xs;
      }
    }

    /* Animation for footer load */
    footer {
      animation: fadeInUp 0.6s ease-out;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Footer section animations */
    footer > div > div > div {
      animation: staggerFadeIn 0.8s ease-out forwards;
    }

    footer > div > div > div:nth-child(2) {
      animation-delay: 0.1s;
    }

    footer > div > div > div:nth-child(3) {
      animation-delay: 0.2s;
    }

    footer > div > div > div:nth-child(4) {
      animation-delay: 0.3s;
    }

    @keyframes staggerFadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</footer>
