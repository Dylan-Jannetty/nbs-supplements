---
// Footer component for NBS Supplements
// Professional footer with company info, links, newsletter signup, and trust signals
// Includes social media links and certification badges
---

<footer class="bg-background border-t border-border/50">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Main Footer Content -->
    <div class="py-12 lg:py-16">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12">
        
        <!-- Company Information -->
        <div class="lg:col-span-1">
          <div class="flex items-center space-x-2 mb-4">
            <!-- Logo -->
            <div class="w-8 h-8 bg-gradient-to-br from-nbs-primary to-nbs-secondary rounded-lg flex items-center justify-center">
              <span class="text-white font-bold text-sm">NBS</span>
            </div>
            <div>
              <span class="text-lg font-bold text-nbs-trust">NBS</span>
              <span class="text-sm text-muted-foreground ml-1">Supplements</span>
            </div>
          </div>
          
          <p class="text-sm text-muted-foreground mb-6 leading-relaxed">
            Clean, natural supplements formulated by pharmacists. Clinically dosed ingredients, third-party tested, and completely transparent.
          </p>

          <!-- Trust Signals -->
          <div class="space-y-3">
            <div class="trust-signal">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              <span>Third-Party Tested</span>
            </div>
            
            <div class="trust-signal">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" />
              </svg>
              <span>Made in USA</span>
            </div>
            
            <div class="trust-signal">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <span>FDA Registered Facility</span>
            </div>
          </div>
        </div>

        <!-- Quick Links -->
        <div>
          <h3 class="text-sm font-semibold text-nbs-trust uppercase tracking-wider mb-4">Products</h3>
          <nav aria-label="Footer product navigation">
            <ul class="space-y-3">
              <li>
                <a 
                  href="/products" 
                  class="text-sm text-muted-foreground hover:text-nbs-primary transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded"
                >
                  All Products
                </a>
              </li>
              <li>
                <a 
                  href="/products/pre-workout" 
                  class="text-sm text-muted-foreground hover:text-nbs-primary transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded"
                >
                  Pre-Workout
                </a>
              </li>
              <li>
                <a 
                  href="/products/protein" 
                  class="text-sm text-muted-foreground hover:text-nbs-primary transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded"
                >
                  Protein
                </a>
              </li>
              <li>
                <a 
                  href="/products/recovery" 
                  class="text-sm text-muted-foreground hover:text-nbs-primary transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded"
                >
                  Recovery
                </a>
              </li>
              <li>
                <a 
                  href="/products/wellness" 
                  class="text-sm text-muted-foreground hover:text-nbs-primary transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded"
                >
                  Daily Wellness
                </a>
              </li>
            </ul>
          </nav>
        </div>

        <!-- Company Links -->
        <div>
          <h3 class="text-sm font-semibold text-nbs-trust uppercase tracking-wider mb-4">Company</h3>
          <nav aria-label="Footer company navigation">
            <ul class="space-y-3">
              <li>
                <a 
                  href="/about" 
                  class="text-sm text-muted-foreground hover:text-nbs-primary transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded"
                >
                  About Us
                </a>
              </li>
              <li>
                <a 
                  href="/blog" 
                  class="text-sm text-muted-foreground hover:text-nbs-primary transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded"
                >
                  Blog
                </a>
              </li>
              <li>
                <a 
                  href="/contact" 
                  class="text-sm text-muted-foreground hover:text-nbs-primary transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded"
                >
                  Contact
                </a>
              </li>
              <li>
                <a 
                  href="/reviews" 
                  class="text-sm text-muted-foreground hover:text-nbs-primary transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded"
                >
                  Reviews
                </a>
              </li>
              <li>
                <a 
                  href="/faq" 
                  class="text-sm text-muted-foreground hover:text-nbs-primary transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded"
                >
                  FAQ
                </a>
              </li>
            </ul>
          </nav>
        </div>

        <!-- Newsletter Signup -->
        <div>
          <h3 class="text-sm font-semibold text-nbs-trust uppercase tracking-wider mb-4">Stay Updated</h3>
          <p class="text-sm text-muted-foreground mb-4">
            Get expert supplement insights, new product updates, and exclusive offers.
          </p>
          
          <!-- Newsletter Component -->
          <div id="newsletter-container">
            <!-- Newsletter form will be loaded here -->
          </div>

          <!-- Social Media Links -->
          <div class="mt-6">
            <h4 class="text-sm font-medium text-foreground mb-3">Follow Us</h4>
            <div class="flex space-x-3">
              <a 
                href="https://www.instagram.com/nbssupplements/"
                target="_blank"
                rel="noopener noreferrer"
                class="p-2 text-muted-foreground hover:text-nbs-primary bg-background hover:bg-nbs-primary/5 rounded-lg border border-border/50 transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary"
                aria-label="Follow NBS Supplements on Instagram"
              >
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path fill-rule="evenodd" d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.62 5.367 11.987 11.988 11.987s11.987-5.367 11.987-11.987C24.004 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.49-3.328-1.297C4.243 14.814 3.76 13.663 3.76 12.366s.484-2.448 1.361-3.328c.88-.88 2.031-1.297 3.328-1.297s2.448.417 3.328 1.297c.88.88 1.297 2.031 1.297 3.328s-.417 2.448-1.297 3.328c-.88.807-2.031 1.297-3.328 1.297zm0-1.297c.807 0 1.547-.293 2.153-.879.606-.586.879-1.346.879-2.153 0-.807-.273-1.567-.879-2.153-.606-.586-1.346-.879-2.153-.879-.807 0-1.567.293-2.153.879-.586.586-.879 1.346-.879 2.153 0 .807.293 1.567.879 2.153.586.586 1.346.879 2.153.879zm7.83-6.405c-.293 0-.489-.196-.489-.489s.196-.489.489-.489.489.196.489.489-.196.489-.489.489z" clip-rule="evenodd" />
                </svg>
              </a>
              
              <a 
                href="https://www.facebook.com/nbssupplements/"
                target="_blank"
                rel="noopener noreferrer"
                class="p-2 text-muted-foreground hover:text-nbs-primary bg-background hover:bg-nbs-primary/5 rounded-lg border border-border/50 transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary"
                aria-label="Follow NBS Supplements on Facebook"
              >
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" />
                </svg>
              </a>
              
              <a 
                href="https://www.youtube.com/@nbssupplements"
                target="_blank"
                rel="noopener noreferrer"
                class="p-2 text-muted-foreground hover:text-nbs-primary bg-background hover:bg-nbs-primary/5 rounded-lg border border-border/50 transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary"
                aria-label="Subscribe to NBS Supplements on YouTube"
              >
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Certifications Bar -->
    <div class="py-6 border-t border-border/50">
      <div class="flex flex-wrap items-center justify-center gap-4 sm:gap-6">
        <div class="certification-badge">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
          </svg>
          <span>GMP Certified</span>
        </div>
        
        <div class="certification-badge">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <span>FDA Registered</span>
        </div>
        
        <div class="certification-badge">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
            <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" />
          </svg>
          <span>Made in USA</span>
        </div>
        
        <div class="certification-badge">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
            <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
          </svg>
          <span>Third-Party Tested</span>
        </div>
      </div>
    </div>

    <!-- Bottom Footer -->
    <div class="py-6 border-t border-border/50">
      <div class="flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0">
        <!-- Copyright -->
        <div class="text-sm text-muted-foreground">
          © {new Date().getFullYear()} NBS Supplements. All rights reserved.
        </div>
        
        <!-- Legal Links -->
        <nav aria-label="Footer legal navigation">
          <div class="flex items-center space-x-6">
            <a 
              href="/privacy" 
              class="text-sm text-muted-foreground hover:text-nbs-primary transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded"
            >
              Privacy Policy
            </a>
            <a 
              href="/terms" 
              class="text-sm text-muted-foreground hover:text-nbs-primary transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded"
            >
              Terms of Service
            </a>
            <a 
              href="/refund-policy" 
              class="text-sm text-muted-foreground hover:text-nbs-primary transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-nbs-primary rounded"
            >
              Refund Policy
            </a>
          </div>
        </nav>
      </div>
    </div>
  </div>
</footer>

<script>
  // Load Newsletter component dynamically
  async function loadNewsletterComponent() {
    try {
      const container = document.getElementById('newsletter-container');
      if (!container) return;

      // This would typically load the Newsletter component
      // For now, we'll add a placeholder that matches the Newsletter.astro design
      container.innerHTML = `
        <form 
          name="newsletter" 
          method="POST" 
          data-netlify="true" 
          class="space-y-3"
          action="/thank-you"
          id="footer-newsletter-form"
        >
          <input type="hidden" name="form-name" value="newsletter" />
          
          <div>
            <label for="footer-email" class="sr-only">Email address</label>
            <input
              type="email"
              id="footer-email"
              name="email"
              required
              placeholder="Enter your email"
              class="w-full px-3 py-2 text-sm bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-nbs-primary focus:border-transparent transition-all duration-200"
              aria-describedby="footer-email-description"
            />
            <p id="footer-email-description" class="text-xs text-muted-foreground mt-1">
              We respect your privacy. Unsubscribe at any time.
            </p>
          </div>
          
          <div class="flex items-start space-x-2">
            <input
              type="checkbox"
              id="footer-consent"
              name="consent"
              required
              class="mt-1 h-4 w-4 text-nbs-primary border-border rounded focus:ring-nbs-primary focus:ring-2"
            />
            <label for="footer-consent" class="text-xs text-muted-foreground leading-relaxed">
              I agree to receive marketing emails and acknowledge the 
              <a href="/privacy" class="text-nbs-primary hover:underline">Privacy Policy</a>.
            </label>
          </div>
          
          <button
            type="submit"
            class="w-full px-4 py-2 text-sm font-medium text-white bg-nbs-primary hover:bg-nbs-primary/90 rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-nbs-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            Subscribe
          </button>
          
          <div id="footer-recaptcha-container" class="flex justify-center hidden"></div>
        </form>
      `;
    } catch (error) {
      console.error('Failed to load newsletter component:', error);
    }
  }

  // Initialize newsletter component
  document.addEventListener('DOMContentLoaded', () => {
    loadNewsletterComponent();
    setupFooterRecaptcha();
  });
  document.addEventListener('astro:page-load', () => {
    loadNewsletterComponent();
    setupFooterRecaptcha();
  });
  
  // Setup conditional reCAPTCHA for footer newsletter
  function setupFooterRecaptcha() {
    const form = document.getElementById('footer-newsletter-form');
    const emailInput = document.getElementById('footer-email');
    const recaptchaContainer = document.getElementById('footer-recaptcha-container');
    
    if (!form || !emailInput || !recaptchaContainer) return;
    
    let recaptchaLoaded = false;
    
    const loadRecaptcha = () => {
      if (recaptchaLoaded) return;
      recaptchaLoaded = true;
      
      // Add the data-netlify-recaptcha attribute
      form.setAttribute('data-netlify-recaptcha', 'true');
      
      // Create reCAPTCHA div
      recaptchaContainer.innerHTML = '<div data-netlify-recaptcha="true"></div>';
      recaptchaContainer.classList.remove('hidden');
    };
    
    // Trigger reCAPTCHA load on first form interaction
    const interactionEvents = ['focus', 'click', 'input'];
    const onFirstInteraction = () => {
      loadRecaptcha();
      interactionEvents.forEach(event => {
        emailInput.removeEventListener(event, onFirstInteraction);
      });
    };
    
    interactionEvents.forEach(event => {
      emailInput.addEventListener(event, onFirstInteraction, { once: true, passive: true });
    });
  }
</script>

<style>
  /* Ensure consistent spacing and typography */
  .trust-signal svg {
    flex-shrink: 0;
  }
  
  .certification-badge svg {
    flex-shrink: 0;
  }
  
  /* Hover effects for social media links */
  a[aria-label*="Instagram"]:hover {
    color: #E4405F;
    border-color: #E4405F;
  }
  
  a[aria-label*="Facebook"]:hover {
    color: #1877F2;
    border-color: #1877F2;
  }
  
  a[aria-label*="YouTube"]:hover {
    color: #FF0000;
    border-color: #FF0000;
  }
  
  /* Newsletter form styling */
  #newsletter-container form {
    opacity: 0;
    animation: fade-in 0.3s ease-out forwards;
  }
  
  @keyframes fade-in {
    to {
      opacity: 1;
    }
  }
</style>