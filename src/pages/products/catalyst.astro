---
import BaseLayout from "../../layouts/BaseLayout.astro";
import ProductHero from "../../components/product/ProductHero.astro";
import IngredientsBreakdown from "../../components/product/IngredientsBreakdown.astro";
import ProductReviews from "../../components/product/ProductReviews.astro";
import ProductFAQ from "../../components/product/ProductFAQ.astro";
import UsageInstructions from "../../components/product/UsageInstructions.astro";
import { getImage } from "astro:assets";
import catalystStacked from "../../images/catalyst-stacked.png";

// Process image for use in product data
const catalystStackedImage = await getImage({ src: catalystStacked });

// Product data
const product = {
  name: "Catalyst Pre-Workout",
  price: 30.0,
  originalPrice: 49.99,
  rating: 4.8,
  reviewCount: 127,
  inStock: true,
  description:
    "Clean, pharmacist-formulated pre-workout with clinical doses of creatine, L-citrulline, and natural energy boosters. No fillers, no fluff - just results.",
  shortDescription:
    "The clean pre-workout that delivers real results without the junk.",
  servingsPerContainer: 30,
  servingSize: "1 scoop (12g)",
  gumroadUrl: "https://gumroad.com/l/nbs-catalyst",
  images: [
    {
      src: "/images/catalyst-single.png",
      alt: "Catalyst Pre-Workout front bottle",
      thumbnail: "/images/catalyst-single.png",
    },
    {
      src: "/images/catalyst-front.webp",
      alt: "Catalyst Pre-Workout front label showing clean ingredient list",
      thumbnail: "/images/catalyst-front.webp",
    },
    {
      src: "/images/catalyst-back.webp",
      alt: "Catalyst Pre-Workout supplement facts and usage instructions",
      thumbnail: "/images/catalyst-back.webp",
    },
    {
      src: "/images/catalyst-ingredients.webp",
      alt: "Close-up of Catalyst's natural ingredients and clinical dosing",
      thumbnail: "/images/catalyst-ingredients.webp",
    },
    {
      src: catalystStackedImage.src,
      alt: "Multiple Catalyst Pre-Workout containers stacked showing product line",
      thumbnail: catalystStackedImage.src,
    },
  ],
};

// Ingredient data with clinical information
const ingredients = [
  {
    name: "Creatine Monohydrate",
    dosage: "5g",
    purpose: "Power & Strength",
    description:
      "The gold standard for strength and power. Clinical dose proven to increase muscle power output by up to 15%.",
    benefits: [
      "Increased power output",
      "Enhanced muscle strength",
      "Improved high-intensity performance",
      "Faster recovery between sets",
    ],
  },
  {
    name: "L-Citrulline",
    dosage: "2g",
    purpose: "Blood Flow & Pumps",
    description:
      "Superior to L-Arginine for nitric oxide production. Enhances blood flow and muscle pumps during training.",
    benefits: [
      "Enhanced muscle pumps",
      "Improved blood flow",
      "Reduced muscle fatigue",
      "Better nutrient delivery",
    ],
  },
  {
    name: "Guarana Extract",
    dosage: "400mg",
    purpose: "Natural Energy",
    description:
      "Nature's alternative to synthetic caffeine. Provides smooth, sustained energy without the crash.",
    benefits: [
      "Clean, natural energy",
      "Enhanced focus",
      "No jitters or crash",
      "Sustained energy release",
    ],
  },
  {
    name: "Beta-Alanine",
    dosage: "2g",
    purpose: "Endurance & Performance",
    description:
      "Buffers lactic acid buildup to extend your training capacity and reduce muscle fatigue.",
    benefits: [
      "Increased muscular endurance",
      "Reduced fatigue",
      "Extended training capacity",
      "Better workout volume",
    ],
  },
  {
    name: "Vitamin B12",
    dosage: "100mcg",
    purpose: "Energy Metabolism",
    description:
      "Essential for energy production and nervous system function. Supports natural energy pathways.",
    benefits: [
      "Energy metabolism support",
      "Nervous system health",
      "Reduced fatigue",
      "Enhanced mental clarity",
    ],
  },
  {
    name: "Vitamin C",
    dosage: "90mg",
    purpose: "Antioxidant Support",
    description:
      "Powerful antioxidant that protects against exercise-induced oxidative stress.",
    benefits: [
      "Antioxidant protection",
      "Immune system support",
      "Collagen synthesis",
      "Recovery enhancement",
    ],
  },
  {
    name: "Monk Fruit Extract",
    dosage: "Natural sweetener",
    purpose: "Clean Sweetening",
    description:
      "Zero-calorie natural sweetener that's 200x sweeter than sugar with no glycemic impact.",
    benefits: [
      "Zero calories",
      "No artificial sweeteners",
      "No glycemic impact",
      "Natural taste enhancement",
    ],
  },
];

// FAQ data
const faqs = [
  {
    question: "When should I take Catalyst?",
    answer:
      "Take Catalyst 15-30 minutes before your workout. Mix 1 scoop with 8-10 oz of cold water. For best results, take on an empty stomach or 2-3 hours after eating.",
  },
  {
    question: "Is Catalyst safe for daily use?",
    answer:
      "Yes, Catalyst is formulated with clinically studied ingredients at safe, effective doses. It's third-party tested for purity and potency. We recommend cycling off for 1-2 weeks every 8-10 weeks.",
  },
  {
    question: "How is Catalyst different from other pre-workouts?",
    answer:
      "Catalyst uses only natural ingredients with no artificial colors, flavors, or synthetic stimulants. Every ingredient is clinically dosed - no proprietary blends or underdosed compounds.",
  },
  {
    question: "Will I experience tingles or side effects?",
    answer:
      "You may experience mild tingling from beta-alanine, which is normal and harmless. This indicates the ingredient is working. The sensation typically subsides after 15-20 minutes.",
  },
  {
    question: "Can I stack Catalyst with other supplements?",
    answer:
      "Catalyst works great on its own, but can be combined with our future products. Avoid taking with other caffeine sources to prevent overstimulation.",
  },
  {
    question: "What's your return policy?",
    answer:
      "We offer a 30-day money-back guarantee. If you're not satisfied with your results, contact us for a full refund. Your satisfaction is our priority.",
  },
];

// Testimonials specific to Catalyst
const testimonials = [
  {
    name: "Mike Chen",
    rating: 5,
    text: "Finally, a pre-workout that doesn't make me crash or feel jittery. Clean energy that lasts my entire workout.",
    verified: true,
    date: "2024-01-15",
  },
  {
    name: "Sarah Martinez",
    rating: 5,
    text: "Love that I can pronounce every ingredient. The pumps are incredible and I feel focused throughout my training.",
    verified: true,
    date: "2024-01-10",
  },
  {
    name: "David Thompson",
    rating: 4,
    text: "Best natural pre-workout I've tried. The taste is great and no artificial aftertaste like other brands.",
    verified: true,
    date: "2024-01-08",
  },
];

// SEO data
const seoData = {
  title:
    "Catalyst Pre-Workout - Clean, Natural, Pharmacist-Formulated | NBS Supplements",
  description:
    "Catalyst Pre-Workout delivers clinical doses of creatine, L-citrulline, and natural guarana. Clean formulation with no artificial ingredients. Third-party tested. $30.00",
  keywords:
    "natural pre-workout, clean pre-workout, pharmacist formulated pre-workout, creatine pre-workout, no artificial ingredients",
  canonicalUrl: "https://supplements-nbs.com/products/catalyst",
};
---

<BaseLayout
  title={seoData.title}
  description={seoData.description}
  bodyClass="product-page"
>
  <!-- Structured Data Schema -->
  <script type="application/ld+json" slot="head">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Product",
          "@id": "https://supplements-nbs.com/products/catalyst#product",
          "name": "Catalyst Pre-Workout",
          "description": "Clean, pharmacist-formulated pre-workout with clinical doses of creatine, L-citrulline, and natural energy boosters.",
          "brand": {
            "@type": "Brand",
            "name": "NBS Supplements",
            "url": "https://supplements-nbs.com"
          },
          "category": "Sports Nutrition > Pre-Workout Supplements",
          "offers": {
            "@type": "Offer",
            "@id": "https://supplements-nbs.com/products/catalyst#offer",
            "url": "https://gumroad.com/l/nbs-catalyst",
            "priceCurrency": "USD",
            "price": "30.00",
            "priceValidUntil": "2025-12-31",
            "availability": "https://schema.org/InStock",
            "seller": {
              "@type": "Organization",
              "name": "NBS Supplements"
            }
          },
          "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "reviewCount": "127",
            "bestRating": "5",
            "worstRating": "1"
          },
          "review": [
            {
              "@type": "Review",
              "reviewRating": {
                "@type": "Rating",
                "ratingValue": "5"
              },
              "author": {
                "@type": "Person",
                "name": "Mike Chen"
              },
              "reviewBody": "Finally, a pre-workout that doesn't make me crash or feel jittery. Clean energy that lasts my entire workout.",
              "datePublished": "2024-01-15"
            }
          ],
          "image": [
            "https://supplements-nbs.com/images/catalyst-front.webp",
            "https://supplements-nbs.com/images/catalyst-back.webp",
            "https://supplements-nbs.com/images/catalyst-ingredients.webp",
            `https://supplements-nbs.com${catalystStackedImage.src}`
          ],
          "additionalProperty": [
            {
              "@type": "PropertyValue",
              "name": "Serving Size",
              "value": "1 scoop (12g)"
            },
            {
              "@type": "PropertyValue",
              "name": "Servings Per Container",
              "value": "30"
            },
            {
              "@type": "PropertyValue",
              "name": "Third-Party Tested",
              "value": "Yes"
            }
          ]
        },
        {
          "@type": "BreadcrumbList",
          "itemListElement": [
            {
              "@type": "ListItem",
              "position": 1,
              "name": "Home",
              "item": "https://supplements-nbs.com"
            },
            {
              "@type": "ListItem",
              "position": 2,
              "name": "Products",
              "item": "https://supplements-nbs.com/products"
            },
            {
              "@type": "ListItem",
              "position": 3,
              "name": "Catalyst Pre-Workout",
              "item": "https://supplements-nbs.com/products/catalyst"
            }
          ]
        }
      ]
    }
  </script>

  <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8" transition:name="main-content">
    <!-- Product Hero Section -->
    <ProductHero product={product} />

    <!-- Enhanced Product Features Integration (handled by JavaScript) -->
    <div
      id="enhanced-product-features"
      data-product-name={product.name}
      data-product-price={product.price}
    >
    </div>

    <!-- Social Proof Section -->
    <div
      class="card mb-6 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-950/30 dark:to-blue-950/30 border-green-200 dark:border-green-800"
      data-observe
    >
      <div class="card-content p-4">
        <div class="flex items-center justify-between">
          <div>
            <div class="flex items-center gap-2 mb-2">
              <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse">
              </div>
              <span
                class="text-sm font-medium text-green-700 dark:text-green-300"
              >
                87 left in stock
              </span>
            </div>
            <div class="text-xs text-muted-foreground">
              Recent purchases will be shown here
            </div>
          </div>
          <button
            class="btn btn-outline btn-sm wishlist-button"
            data-product={product.name}
          >
            <svg
              class="w-4 h-4 mr-2 transition-colors wishlist-heart"
              stroke="currentColor"
              fill="none"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width={2}
                d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
              ></path>
            </svg>
            <span class="wishlist-text">Add to Wishlist</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Product Description -->
    <section class="mb-12 mt-12">
      <div class="prose prose-lg max-w-none">
        <h2 class="text-2xl font-bold text-foreground mb-4">
          Clean Pre-Workout That Actually Works
        </h2>
        <p class="text-muted-foreground leading-relaxed">
          {product.description} Every ingredient is carefully selected and dosed
          based on scientific research, not marketing hype. We believe in transparency
          - that's why every ingredient and dosage is clearly listed on our label,
          with no proprietary blends to hide behind.
        </p>
        <p class="text-muted-foreground leading-relaxed">
          Catalyst delivers clean, sustained energy without the crash, enhanced
          blood flow for better pumps, and improved endurance to help you push
          through your toughest workouts. All while using only natural
          ingredients your body recognizes and can utilize effectively.
        </p>
      </div>
    </section>

    <!-- Ingredient Breakdown -->
    <IngredientsBreakdown ingredients={ingredients} />

    <!-- Secondary CTA -->
    <section
      class="bg-gradient-to-r from-nbs-primary/5 to-nbs-secondary/5 rounded-2xl p-8 text-center mb-12"
      data-observe
    >
      <h3 class="text-2xl font-bold text-foreground mb-4">
        Ready to Experience Clean Energy?
      </h3>
      <p class="text-muted-foreground mb-6 max-w-2xl mx-auto">
        Join thousands of satisfied customers who've made the switch to clean,
        effective pre-workout supplementation.
      </p>
      <button
        class="btn btn-primary btn-lg purchase-button px-8 transition-all duration-300"
        onclick="window.open('https://gumroad.com/l/nbs-catalyst', '_blank')"
      >
        Order Catalyst Now - ${product.price}
      </button>
      <p class="text-sm text-muted-foreground mt-3">
        Free shipping on orders over $50 • 30-day money-back guarantee
      </p>
    </section>

    <!-- Usage Instructions -->
    <UsageInstructions />

    <!-- Customer Reviews -->
    <ProductReviews product={product} testimonials={testimonials} />

    <!-- FAQ Section -->
    <ProductFAQ faqs={faqs} />

    <!-- Final CTA -->
    <section
      class="text-center bg-gradient-to-r from-nbs-primary to-nbs-secondary rounded-2xl p-8 text-white"
      data-observe
    >
      <h3 class="text-2xl lg:text-3xl font-bold mb-4">
        Transform Your Workouts Today
      </h3>
      <p class="text-lg opacity-90 mb-6 max-w-2xl mx-auto">
        Join the thousands of athletes and fitness enthusiasts who trust
        Catalyst for clean, effective pre-workout supplementation.
      </p>
      <button
        class="btn btn-secondary btn-lg purchase-button bg-white text-nbs-primary hover:bg-white/90 px-8 text-lg transition-all duration-300"
        onclick="window.open('https://gumroad.com/l/nbs-catalyst', '_blank')"
      >
        Order Now - ${product.price}
      </button>
      <div
        class="flex items-center justify-center gap-6 mt-6 text-sm opacity-80"
      >
        <div class="flex items-center gap-2">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          30-Day Guarantee
        </div>
        <div class="flex items-center gap-2">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path
              d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"
            ></path>
          </svg>
          Free Shipping Over $50
        </div>
        <div class="flex items-center gap-2">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path
              fill-rule="evenodd"
              d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"
              clip-rule="evenodd"></path>
          </svg>
          Secure Checkout
        </div>
      </div>
    </section>

    <!-- Performance tracking is handled by the coordinator -->
  </main>

  <!-- Configuration for JavaScript modules -->
  <script define:vars={{ product, ingredients }}>
    window.PRODUCT_PAGE_CONFIG = {
      product: product,
      ingredients: ingredients,
    };
  </script>

  <!-- Enhanced JavaScript -->
  <script src="/scripts/product-image-gallery.js" is:inline></script>
  <script src="/scripts/product-enhancements.js" is:inline></script>
  <script type="module" src="/scripts/product-page-coordinator.js"></script>
</BaseLayout>